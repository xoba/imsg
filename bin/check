#!/bin/bash -e

# Ensure golangci-lint exists
if ! command -v golangci-lint >/dev/null 2>&1; then
  echo "golangci-lint not found, installing..."
  go install github.com/golangci/golangci-lint/v2/cmd/golangci-lint@latest
  # add GOPATH/bin to PATH if needed
  export PATH="$(go env GOPATH)/bin:$PATH"
fi

go test ./...
echo
golangci-lint run
